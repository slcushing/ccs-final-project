(this.webpackJsonpstatic=this.webpackJsonpstatic||[]).push([[0],{25:function(e,t,a){},27:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),s=a(17),c=a.n(s),o=(a(24),a(25),a(6)),i=a(7),l=a.n(i),u=a(9),b=a(8),d=a(2),j=(a(27),a(10)),m=a(5),h=a(11),p=a.n(h),f=a(0);var O=Object(d.h)((function(e){var t=Object(n.useState)({username:"",email:"",password1:"",password2:""}),a=Object(b.a)(t,2),r=a[0],s=a[1],c=Object(n.useState)(null),o=Object(b.a)(c,2),i=(o[0],o[1]);function h(e){var t=e.target,a=t.name,n=t.value;s((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(j.a)({},a,n))}))}function O(e){console.warn(e)}function x(){return(x=Object(u.a)(l.a.mark((function t(a){var n,s,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),console.log("user",r),r.password1===r.password2){t.next=6;break}i("Passwords do not match!"),t.next=20;break;case 6:return n={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":p.a.get("csrftoken")},body:JSON.stringify(r)},t.next=9,fetch("/rest-auth/registration/",n).catch(O);case 9:if((s=t.sent).ok){t.next=14;break}console.log(s),t.next=20;break;case 14:return t.next=16,s.json();case 16:c=t.sent,p.a.set("Authorization","Token ".concat(c.key)),e.setUser((function(e){return Object(m.a)(Object(m.a)({},e),{},{isAuth:!0})})),e.history.push("/");case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return e.isAuth?Object(f.jsx)(d.a,{to:"/"}):Object(f.jsxs)("form",{className:"mt-3 col-4 offset-lg-4 register-form",onSubmit:function(e){return x.apply(this,arguments)},children:[Object(f.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(f.jsx)("label",{htmlFor:"username",children:"Username"}),Object(f.jsx)("input",{type:"text",className:"form-control",id:"username",placeholder:"Enter Username",required:!0,name:"username",value:r.username,onChange:h})]}),Object(f.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(f.jsx)("label",{htmlFor:"email",children:"Email"}),Object(f.jsx)("input",{type:"email",className:"form-control",id:"email",placeholder:"Enter Email",required:!0,name:"email",value:r.email,onChange:h})]}),Object(f.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(f.jsx)("label",{htmlFor:"password1",children:"Password 1"}),Object(f.jsx)("input",{type:"password",className:"form-control",id:"password1",placeholder:"Enter Password",required:!0,name:"password1",value:r.password1,onChange:h})]}),Object(f.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(f.jsx)("label",{htmlFor:"password2",children:"Password 2"}),Object(f.jsx)("input",{type:"password",className:"form-control",id:"password2",placeholder:"Confirm Password",required:!0,name:"password2",value:r.password2,onChange:h})]}),Object(f.jsx)("button",{type:"submit",className:"btn btn-primary mt-3",id:"register-button",children:"Register"})]})}));var x=Object(d.h)((function(e){var t=Object(n.useState)({username:"",password:""}),a=Object(b.a)(t,2),r=a[0],s=a[1];function c(e){var t=e.target,a=t.name,n=t.value;s((function(e){return Object(m.a)(Object(m.a)({},e),{},Object(j.a)({},a,n))}))}function o(e){console.warn(e)}function i(){return(i=Object(u.a)(l.a.mark((function t(a){var n,s,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),n={method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":p.a.get("csrftoken")},body:JSON.stringify(r)},t.next=4,fetch("/rest-auth/login/",n).catch(o);case 4:if((s=t.sent).ok){t.next=9;break}console.log(s),t.next=15;break;case 9:return t.next=11,s.json();case 11:c=t.sent,p.a.set("Authorization","Token ".concat(c.key)),e.setUser((function(e){return Object(m.a)(Object(m.a)({},e),{},{isAuth:!0})})),e.history.push("/dashboard/");case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return e.isAuth?Object(f.jsx)(d.a,{to:"/"}):Object(f.jsxs)("form",{className:"mt-3 col-4 offset-lg-4 login-form",onSubmit:function(e){return i.apply(this,arguments)},children:[Object(f.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(f.jsx)("label",{htmlFor:"username",children:"Username"}),Object(f.jsx)("input",{type:"text",className:"form-control",id:"username",placeholder:"Enter Username",onChange:c,required:!0,name:"username",value:r.username})]}),Object(f.jsxs)("div",{className:"form-group text-left mb-3",children:[Object(f.jsx)("label",{htmlFor:"password",children:"Password"}),Object(f.jsx)("input",{type:"password",className:"form-control",id:"password",placeholder:"Enter Password",onChange:c,required:!0,name:"password",value:r.password})]}),Object(f.jsx)("button",{type:"submit",className:"btn btn-primary",id:"login-button",children:"Login"})]})}));var v=function(e){return Object(f.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark",id:"header-nav",children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsx)("a",{className:"navbar-brand",href:"/",children:"KPF"}),Object(f.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(f.jsx)("span",{className:"navbar-toggler-icon"})})]})})};var g=Object(d.h)((function(){var e=Object(n.useState)(null),t=Object(b.a)(e,2),a=t[0],r=t[1],s=Object(d.g)();Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/rest-auth/user/");case 2:if((t=e.sent).ok){e.next=7;break}r({isAuth:!1}),e.next=11;break;case 7:return e.next=9,t.json();case 9:a=e.sent,r({isAuth:!0,isAdmin:a.is_staff});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[s]);var c=null===a||void 0===a?void 0:a.isAuth,o=null===a||void 0===a?void 0:a.isAdmin;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(v,{isAuth:c,isAdmin:o}),Object(f.jsxs)(d.d,{children:[Object(f.jsx)(d.b,{path:"/registration",children:Object(f.jsx)(O,{isAuth:c,setUser:r})}),Object(f.jsx)(d.b,{path:"/login",children:Object(f.jsx)(x,{isAuth:c,setUser:r})})]})]})})),w=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,38)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(o.a,{children:Object(f.jsx)(g,{})})}),document.getElementById("root")),w()}},[[37,1,2]]]);
//# sourceMappingURL=main.6fddf448.chunk.js.map